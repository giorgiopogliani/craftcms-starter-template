var plugin=$.extend({},Craft.Redactor.PluginBase,{linkOptions:[],existingText:"",hack:null,modalState:{selectedLink:{text:null,url:null}},start:function(){},showModal:function(arguments,e){let t=arguments.refHandle;arguments.callback;this.saveSelection(this.app);Craft.createElementSelectorModal(arguments.elementType,{storageKey:"RedactorInput.LinkTo."+arguments.elementType,sources:arguments.sources,criteria:arguments.criteria,defaultSiteId:this.elementSiteId,autoFocusSearchBox:!1,onSelect:$.proxy((function(e){if(e.length){const i=e[0];this.restoreSelection(this.app),this.modalState.selectedLink={url:i.url+"#"+t+":"+i.id+"@"+i.siteId,text:this.app.selection.getText().length>0?this.app.selection.getText():i.label},this.app.api("module.link.open")}}),this),closeOtherModals:!1})},setLinkOptions:function(e){this.linkOptions=e},onmodal:{link:{open:function(e,t){this.hack=e.app.editor.focus,e.app.editor.focus=()=>null,$form=$(t.nodes),this.modalState.selectedLink.url&&$form.find("input[name=url]").val(this.modalState.selectedLink.url),this.modalState.selectedLink.text&&$form.find("input[name=text]").val(this.modalState.selectedLink.text),this.modalState.selectedLink={text:null,url:null}},close:function(e){e.app.editor.focus=this.hack,this.hack=null}}},setLinkOptions:function(e){var t=this.app.toolbar.getButton("link"),i=t.getDropdown().items,n={},l=0;for(var o in e)o=e[o],n["custom"+ ++l]={title:o.optionTitle,api:"plugin.craftElementLinks.showModal",args:{elementType:o.elementType,refHandle:o.refHandle,sources:o.sources,criteria:o.criteria}};t.setDropdown($.extend(n,i))}});Redactor.add("plugin","craftElementLinks",plugin);
//# sourceMappingURL=CraftElementLinks.min.js.map
