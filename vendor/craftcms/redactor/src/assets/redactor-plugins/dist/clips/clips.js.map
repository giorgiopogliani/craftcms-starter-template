{"version":3,"sources":["clips/clips.js"],"names":["$R","add","translations","en","clips","clips-select","modals","init","app","this","opts","lang","toolbar","insertion","onmodal","open","$modal","_build","start","data","title","get","api","addButton","setIcon","type","options","width","name","$body","getBody","$label","_buildLabel","$list","_buildList","_buildItems","html","append","dom","parse","addClass","items","i","length","$li","$item","attr","on","_insert","bind","e","index","target","insertHtml","Redactor"],"mappings":"CAAA,SAAUA,GAENA,EAAGC,IAAI,SAAU,QAAS,CACtBC,aAAc,CAChBC,GAAI,CACHC,MAAS,QACTC,eAAgB,0BAGfC,OAAQ,CACJF,MAAS,IAEbG,KAAM,SAASC,GAEXC,KAAKD,IAAMA,EACXC,KAAKC,KAAOF,EAAIE,KAChBD,KAAKE,KAAOH,EAAIG,KAChBF,KAAKG,QAAUJ,EAAII,QACnBH,KAAKI,UAAYL,EAAIK,WAGzBC,QAAS,CACLV,MAAO,CACHW,KAAM,SAASC,GAEXP,KAAKQ,OAAOD,MAMxBE,MAAO,WAEH,GAAKT,KAAKC,KAAKN,MAAf,CAEA,IAAIe,EAAO,CACPC,MAAOX,KAAKE,KAAKU,IAAI,SACrBC,IAAK,qBAGKb,KAAKG,QAAQW,UAAU,QAASJ,GACtCK,QAAQ,mCAEpBT,KAAM,SAASU,GAEX,IAAIC,EAAU,CACVN,MAAOX,KAAKE,KAAKU,IAAI,SACrBM,MAAO,QACPC,KAAM,SAGVnB,KAAKD,IAAIc,IAAI,qBAAsBI,IAI7CT,OAAQ,SAASD,GAEb,IAAIa,EAAQb,EAAOc,UACTC,EAAStB,KAAKuB,cACdC,EAAQxB,KAAKyB,aAEjBzB,KAAK0B,YAAYF,GAEjBJ,EAAMO,KAAK,IACXP,EAAMQ,OAAON,GACbF,EAAMQ,OAAOJ,IAGvBD,YAAa,WAEH,IAAID,EAAS/B,EAAGsC,IAAI,WAG1B,OAFMP,EAAOK,KAAK3B,KAAKE,KAAK4B,MAAM,wBAE3BR,GAEXG,WAAY,WAER,IAAID,EAAQjC,EAAGsC,IAAI,QAGb,OAFAL,EAAMO,SAAS,uBAERP,GAEjBE,YAAa,SAASF,GAGlB,IADA,IAAIQ,EAAQhC,KAAKC,KAAKN,MACbsC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAC5B,CACI,IAAIE,EAAM5C,EAAGsC,IAAI,QACbO,EAAQ7C,EAAGsC,IAAI,UAEnBO,EAAMC,KAAK,aAAcJ,GACzBG,EAAMT,KAAKK,EAAMC,GAAG,IACpBG,EAAME,GAAG,QAAStC,KAAKuC,QAAQC,KAAKxC,OAEpCmC,EAAIP,OAAOQ,GACXZ,EAAMI,OAAOO,KAG3BI,QAAS,SAASE,GAER,IACIC,EADQnD,EAAGsC,IAAIY,EAAEE,QACHN,KAAK,cACnBV,EAAO3B,KAAKC,KAAKN,MAAM+C,GAAO,GAElC1C,KAAKD,IAAIc,IAAI,sBACbb,KAAKI,UAAUwC,WAAWjB,MAzGtC,CA4GGkB","file":"clips.js","sourcesContent":["(function($R)\n{\n    $R.add('plugin', 'clips', {\n        translations: {\n    \t\ten: {\n    \t\t\t\"clips\": \"Clips\",\n    \t\t\t\"clips-select\": \"Please, select a clip\"\n            }\n        },\n        modals: {\n            'clips': ''\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.opts = app.opts;\n            this.lang = app.lang;\n            this.toolbar = app.toolbar;\n            this.insertion = app.insertion;\n        },\n        // messages\n        onmodal: {\n            clips: {\n                open: function($modal)\n                {\n                    this._build($modal);\n                }\n            }\n        },\n\n        // public\n        start: function()\n        {\n            if (!this.opts.clips) return;\n\n            var data = {\n                title: this.lang.get('clips'),\n                api: 'plugin.clips.open'\n            };\n\n            var $button = this.toolbar.addButton('clips', data);\n            $button.setIcon('<i class=\"re-icon-clips\"></i>');\n        },\n        open: function(type)\n        {\n            var options = {\n                title: this.lang.get('clips'),\n                width: '600px',\n                name: 'clips'\n            };\n\n            this.app.api('module.modal.build', options);\n\t\t},\n\n\t\t// private\n\t\t_build: function($modal)\n\t\t{\n    \t\tvar $body = $modal.getBody();\n            var $label = this._buildLabel();\n            var $list = this._buildList();\n\n            this._buildItems($list);\n\n            $body.html('');\n            $body.append($label);\n            $body.append($list);\n\n\t\t},\n\t\t_buildLabel: function()\n\t\t{\n            var $label = $R.dom('<label>');\n            $label.html(this.lang.parse('## clips-select ##:'));\n\n    \t\treturn $label;\n\t\t},\n\t\t_buildList: function()\n\t\t{\n    \t\tvar $list = $R.dom('<ul>');\n            $list.addClass('redactor-clips-list');\n\n            return $list;\n\t\t},\n\t\t_buildItems: function($list)\n\t\t{\n    \t\tvar items = this.opts.clips;\n    \t\tfor (var i = 0; i < items.length; i++)\n            {\n                var $li = $R.dom('<li>');\n                var $item = $R.dom('<span>');\n\n                $item.attr('data-index', i);\n                $item.html(items[i][0]);\n                $item.on('click', this._insert.bind(this));\n\n                $li.append($item);\n                $list.append($li);\n            }\n\t\t},\n\t\t_insert: function(e)\n\t\t{\n            var $item = $R.dom(e.target);\n            var index = $item.attr('data-index');\n            var html = this.opts.clips[index][1];\n\n            this.app.api('module.modal.close');\n            this.insertion.insertHtml(html);\n\t\t}\n    });\n})(Redactor);"]}