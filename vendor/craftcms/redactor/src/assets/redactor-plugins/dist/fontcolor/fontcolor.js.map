{"version":3,"sources":["fontcolor/fontcolor.js"],"names":["$R","add","translations","en","fontcolor","text","highlight","init","app","this","opts","lang","inline","toolbar","selection","colors","fontcolors","onfontcolor","set","rule","value","_set","remove","_remove","start","btnObj","title","get","$dropdown","_buildDropdown","$button","addButton","setIcon","setDropdown","dom","$selector","_buildSelector","$selectorText","_buildSelectorItem","addClass","$selectorBack","append","$pickerText","_buildPicker","$pickerBack","_buildSelectorEvents","width","name","$item","attr","html","on","e","preventDefault","find","removeClass","hide","show","bind","$box","len","length","self","func","$el","target","data","z","color","$swatch","rel","data-rule","css","background-color","font-size","border","height","href","display","clear","padding","line-height","style","args","tag","type","format","Redactor"],"mappings":"CAAA,SAAUA,GAENA,EAAGC,IAAI,SAAU,YAAa,CAC1BC,aAAc,CACVC,GAAI,CACAC,UAAa,aACbC,KAAQ,OACRC,UAAa,cAGrBC,KAAM,SAASC,GAEXC,KAAKD,IAAMA,EACXC,KAAKC,KAAOF,EAAIE,KAChBD,KAAKE,KAAOH,EAAIG,KAChBF,KAAKG,OAASJ,EAAII,OAClBH,KAAKI,QAAUL,EAAIK,QACnBJ,KAAKK,UAAYN,EAAIM,UAG3BL,KAAKM,OAAUN,KAAKC,KAAe,WAAID,KAAKC,KAAKM,WAAa,CAC7D,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC9G,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC9G,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC9G,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC9G,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC9G,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAY,UAAW,YAI9GC,YAAa,CACTC,IAAK,SAASC,EAAMC,GAEhBX,KAAKY,KAAKF,EAAMC,IAEpBE,OAAQ,SAASH,GAEbV,KAAKc,QAAQJ,KAKrBK,MAAO,WAEH,IAAIC,EAAS,CACTC,MAAOjB,KAAKE,KAAKgB,IAAI,cAGrBC,EAAYnB,KAAKoB,iBAErBpB,KAAKqB,QAAUrB,KAAKI,QAAQkB,UAAU,YAAaN,GAC5DhB,KAAKqB,QAAQE,QAAQ,qCACrBvB,KAAKqB,QAAQG,YAAYL,IAIpBC,eAAgB,WAEZ,IAAID,EAAY5B,EAAGkC,IAAI,yCAuBvB,OArBAzB,KAAK0B,UAAY1B,KAAK2B,iBAEtB3B,KAAK4B,cAAgB5B,KAAK6B,mBAAmB,OAAQ7B,KAAKE,KAAKgB,IAAI,SACnElB,KAAK4B,cAAcE,SAAS,UAE5B9B,KAAK+B,cAAgB/B,KAAK6B,mBAAmB,OAAQ7B,KAAKE,KAAKgB,IAAI,cAEnElB,KAAK0B,UAAUM,OAAOhC,KAAK4B,eAC3B5B,KAAK0B,UAAUM,OAAOhC,KAAK+B,eAE3B/B,KAAKiC,YAAcjC,KAAKkC,aAAa,aACrClC,KAAKmC,YAAcnC,KAAKkC,aAAa,aAErCf,EAAUa,OAAOhC,KAAK0B,WACtBP,EAAUa,OAAOhC,KAAKiC,aACtBd,EAAUa,OAAOhC,KAAKmC,aAEtBnC,KAAKoC,uBAELjB,EAAUkB,MAAM,KAETlB,GAEXQ,eAAgB,WAEZ,IAAID,EAAYnC,EAAGkC,IAAI,SAGhC,OAFSC,EAAUI,SAAS,8BAErBJ,GAEFG,mBAAoB,SAASS,EAAMrB,GAE/B,IAAIsB,EAAQhD,EAAGkC,IAAI,UAInB,OAHAc,EAAMC,KAAK,MAAOF,GAAMG,KAAKxB,GAC7BsB,EAAMT,SAAS,+BAERS,GAEXH,qBAAsB,WAE3BpC,KAAK4B,cAAcc,GAAG,YAAa,SAASC,GAE3CA,EAAEC,iBAEU5C,KAAK0B,UAAUmB,KAAK,QAAQC,YAAY,UACpD9C,KAAKmC,YAAYY,OACjB/C,KAAKiC,YAAYe,OACjBhD,KAAK4B,cAAcE,SAAS,WAE3BmB,KAAKjD,OAEPA,KAAK+B,cAAcW,GAAG,YAAa,SAASC,GAE3CA,EAAEC,iBAEU5C,KAAK0B,UAAUmB,KAAK,QAAQC,YAAY,UACpD9C,KAAKiC,YAAYc,OACjB/C,KAAKmC,YAAYa,OACjBhD,KAAK+B,cAAcD,SAAS,WAE3BmB,KAAKjD,QAEFkC,aAAc,SAASI,GAc5B,IAZA,IAAIY,EAAO3D,EAAGkC,IAAI,+BAAiCa,EAAO,MACtD5B,EAAgB,aAAR4B,EAAuB,mBAAqB,QACpDa,EAAMnD,KAAKM,OAAO8C,OAClBC,EAAOrD,KACPsD,EAAO,SAASX,GAEnBA,EAAEC,iBAEF,IAAIW,EAAMhE,EAAGkC,IAAIkB,EAAEa,QACnBH,EAAKzC,KAAK2C,EAAIE,KAAK,QAASF,EAAIf,KAAK,SAG7BkB,EAAI,EAAGA,EAAIP,EAAKO,IACzB,CACC,IAAIC,EAAQ3D,KAAKM,OAAOoD,GAEpBE,EAAUrE,EAAGkC,IAAI,UACrBmC,EAAQpB,KAAK,CAAEqB,IAAOF,EAAOG,YAAapD,IAC1CkD,EAAQG,IAAI,CAAEC,mBAAoBL,EAAOM,YAAa,EAAGC,OAAU,iBAAkB7B,MAAS,OAAQ8B,OAAU,SAChHP,EAAQlB,GAAG,YAAaY,GAExBJ,EAAKlB,OAAO4B,GAGb,IAAIL,EAAMhE,EAAGkC,IAAI,OAeR,OAdT8B,EAAIf,KAAK,CAAE4B,KAAQ,MACnBb,EAAIQ,IAAI,CAAEM,QAAW,QAASC,MAAS,OAAQC,QAAW,UAAWN,YAAa,OAAQO,cAAe,IACzGjB,EAAId,KAAKzC,KAAKE,KAAKgB,IAAI,SAEvBqC,EAAIb,GAAG,SAAS,SAASC,GAExBA,EAAEC,iBACFS,EAAKvC,QAAQJ,MAGdwC,EAAKlB,OAAOuB,GAEA,aAARjB,GAAqBY,EAAKH,OAEdG,GAEjBtC,KAAM,SAASF,EAAMC,GAEjB,IAAI8D,EAAQ,GACZA,EAAM/D,GAAQC,EAEd,IAAI+D,EAAO,CACJC,IAAK,OACLF,MAAOA,EACPG,KAAM,UAGhB5E,KAAKG,OAAO0E,OAAOH,IAEpB5D,QAAS,SAASJ,GAEjBV,KAAKG,OAAOU,OAAO,CAAE4D,MAAO/D,OApL/B,CAuLGoE","file":"fontcolor.js","sourcesContent":["(function($R)\n{\n    $R.add('plugin', 'fontcolor', {\n        translations: {\n            en: {\n                \"fontcolor\": \"Text Color\",\n                \"text\": \"Text\",\n                \"highlight\": \"Highlight\"\n            }\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.opts = app.opts;\n            this.lang = app.lang;\n            this.inline = app.inline;\n            this.toolbar = app.toolbar;\n            this.selection = app.selection;\n\n            // local\n    \t\tthis.colors = (this.opts.fontcolors) ? this.opts.fontcolors : [\n    \t\t\t'#ffffff', '#000000', '#eeece1', '#1f497d', '#4f81bd', '#c0504d', '#9bbb59', '#8064a2', '#4bacc6', '#f79646', '#ffff00',\n    \t\t\t'#f2f2f2', '#7f7f7f', '#ddd9c3', '#c6d9f0', '#dbe5f1', '#f2dcdb', '#ebf1dd', '#e5e0ec', '#dbeef3', '#fdeada', '#fff2ca',\n    \t\t\t'#d8d8d8', '#595959', '#c4bd97', '#8db3e2', '#b8cce4', '#e5b9b7', '#d7e3bc', '#ccc1d9', '#b7dde8', '#fbd5b5', '#ffe694',\n    \t\t\t'#bfbfbf', '#3f3f3f', '#938953', '#548dd4', '#95b3d7', '#d99694', '#c3d69b', '#b2a2c7', '#b7dde8', '#fac08f', '#f2c314',\n    \t\t\t'#a5a5a5', '#262626', '#494429', '#17365d', '#366092', '#953734', '#76923c', '#5f497a', '#92cddc', '#e36c09', '#c09100',\n    \t\t\t'#7f7f7f', '#0c0c0c', '#1d1b10', '#0f243e', '#244061', '#632423', '#4f6128', '#3f3151', '#31859b',  '#974806', '#7f6000'\n    \t\t];\n        },\n        // messages\n        onfontcolor: {\n            set: function(rule, value)\n            {\n                this._set(rule, value);\n            },\n            remove: function(rule)\n            {\n                this._remove(rule);\n            }\n        },\n\n        // public\n        start: function()\n        {\n            var btnObj = {\n                title: this.lang.get('fontcolor')\n            };\n\n            var $dropdown = this._buildDropdown();\n\n            this.$button = this.toolbar.addButton('fontcolor', btnObj);\n\t\t\tthis.$button.setIcon('<i class=\"re-icon-fontcolor\"></i>');\n\t\t\tthis.$button.setDropdown($dropdown);\n        },\n\n        // private\n        _buildDropdown: function()\n        {\n            var $dropdown = $R.dom('<div class=\"redactor-dropdown-cells\">');\n\n            this.$selector = this._buildSelector();\n\n            this.$selectorText = this._buildSelectorItem('text', this.lang.get('text'));\n            this.$selectorText.addClass('active');\n\n            this.$selectorBack = this._buildSelectorItem('back', this.lang.get('highlight'));\n\n            this.$selector.append(this.$selectorText);\n            this.$selector.append(this.$selectorBack);\n\n            this.$pickerText = this._buildPicker('textcolor');\n            this.$pickerBack = this._buildPicker('backcolor');\n\n            $dropdown.append(this.$selector);\n            $dropdown.append(this.$pickerText);\n            $dropdown.append(this.$pickerBack);\n\n            this._buildSelectorEvents();\n\n            $dropdown.width(242);\n\n            return $dropdown;\n        },\n        _buildSelector: function()\n        {\n            var $selector = $R.dom('<div>');\n            $selector.addClass('redactor-dropdown-selector');\n\n\t\t\treturn $selector;\n        },\n        _buildSelectorItem: function(name, title)\n        {\n            var $item = $R.dom('<span>');\n            $item.attr('rel', name).html(title);\n            $item.addClass('redactor-dropdown-not-close');\n\n            return $item;\n        },\n        _buildSelectorEvents: function()\n        {\n\t\t\tthis.$selectorText.on('mousedown', function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\n                this.$selector.find('span').removeClass('active');\n\t\t\t\tthis.$pickerBack.hide();\n\t\t\t\tthis.$pickerText.show();\n\t\t\t\tthis.$selectorText.addClass('active');\n\n\t\t\t}.bind(this));\n\n\t\t\tthis.$selectorBack.on('mousedown', function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\n                this.$selector.find('span').removeClass('active');\n\t\t\t\tthis.$pickerText.hide();\n\t\t\t\tthis.$pickerBack.show();\n\t\t\t\tthis.$selectorBack.addClass('active');\n\n\t\t\t}.bind(this));\n        },\n        _buildPicker: function(name)\n\t\t{\n\t\t\tvar $box = $R.dom('<div class=\"re-dropdown-box-' + name + '\">');\n\t\t\tvar rule = (name == 'backcolor') ? 'background-color' : 'color';\n\t\t\tvar len = this.colors.length;\n\t\t\tvar self = this;\n\t\t\tvar func = function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar $el = $R.dom(e.target);\n\t\t\t\tself._set($el.data('rule'), $el.attr('rel'));\n\t\t\t};\n\n\t\t\tfor (var z = 0; z < len; z++)\n\t\t\t{\n\t\t\t\tvar color = this.colors[z];\n\n\t\t\t\tvar $swatch = $R.dom('<span>');\n\t\t\t\t$swatch.attr({ 'rel': color, 'data-rule': rule });\n\t\t\t\t$swatch.css({ 'background-color': color, 'font-size': 0, 'border': '2px solid #fff', 'width': '22px', 'height': '22px' });\n\t\t\t\t$swatch.on('mousedown', func);\n\n\t\t\t\t$box.append($swatch);\n\t\t\t}\n\n\t\t\tvar $el = $R.dom('<a>');\n\t\t\t$el.attr({ 'href': '#' });\n\t\t\t$el.css({ 'display': 'block', 'clear': 'both', 'padding': '8px 5px', 'font-size': '12px', 'line-height': 1 });\n\t\t\t$el.html(this.lang.get('none'));\n\n\t\t\t$el.on('click', function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tself._remove(rule);\n\t\t\t});\n\n\t\t\t$box.append($el);\n\n\t\t\tif (name == 'backcolor') $box.hide();\n\n            return $box;\n\t\t},\n\t\t_set: function(rule, value)\n\t\t{\n    \t\tvar style = {};\n    \t\tstyle[rule] = value;\n\n    \t\tvar args = {\n        \t    tag: 'span',\n        \t    style: style,\n        \t    type: 'toggle'\n    \t\t};\n\n\t\t\tthis.inline.format(args);\n\t\t},\n\t\t_remove: function(rule)\n\t\t{\n\t\t\tthis.inline.remove({ style: rule });\n\t\t}\n    });\n})(Redactor);"]}